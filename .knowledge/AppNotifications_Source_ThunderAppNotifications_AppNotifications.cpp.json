{"is_source_file": true, "format": "C++", "description": "This file implements the AppNotifications class, which is part of a notification plugin system using JSON-RPC. It manages notifications, subscriptions, persistence, and event emission within a plugin framework.", "external_files": ["AppNotifications.h"], "external_methods": ["PluginHost::JSONRPC::Register", "PluginHost::JSONRPC::Unregister", "PluginHost::JSONRPC::Activate", "PluginHost::JSONRPC::Deactivate", "PluginHost::JSONRPC::Notify"], "published": ["Ping", "Publish", "Subscribe", "Unsubscribe", "List", "Clear", "Ack", "GetSubscribers", "Information"], "classes": [{"name": "AppNotifications", "description": "Implements a notification server handling publish/subscribe, listing, acknowledgment, and event emissions within a plugin framework."}], "methods": [{"name": "const string Initialize(PluginHost::IShell * service)", "description": "Initializes the notification plugin with the given service, loads configuration, and sets up persistence.", "scope": "Plugin::AppNotifications", "scopeKind": "class"}, {"name": "void Deinitialize(PluginHost::IShell * service)", "description": "Cleans up resources, saves state if necessary, and unregisters methods.", "scope": "Plugin::AppNotifications", "scopeKind": "class"}, {"name": "uint32_t Ping(const Core::JSON::VariantContainer &,PingResult & out)", "description": "Returns the current server time to verify liveness.", "scope": "Plugin::AppNotifications", "scopeKind": "class"}, {"name": "uint32_t Publish(const PublishParams & in,PublishResult & out)", "description": "Publishes a new notification, possibly evicting old ones, and emits notification events.", "scope": "Plugin::AppNotifications", "scopeKind": "class"}, {"name": "uint32_t Subscribe(const SubscribeParams & in,SubscribeResult & out)", "description": "Registers a new subscriber with specified filters.", "scope": "Plugin::AppNotifications", "scopeKind": "class"}, {"name": "uint32_t Unsubscribe(const UnsubscribeParams & in,UnsubscribeResult & out)", "description": "Removes a subscriber.", "scope": "Plugin::AppNotifications", "scopeKind": "class"}, {"name": "uint32_t List(const ListParams & in,NotificationsArray & out)", "description": "Lists notifications based on filters.", "scope": "Plugin::AppNotifications", "scopeKind": "class"}, {"name": "uint32_t Clear(const ClearParams & in,ClearResult & out)", "description": "Clears notifications by ID or by filter.", "scope": "Plugin::AppNotifications", "scopeKind": "class"}, {"name": "uint32_t Ack(const AckParams & in,AckResult & out)", "description": "Acknowledges a notification.", "scope": "Plugin::AppNotifications", "scopeKind": "class"}, {"name": "uint32_t GetSubscribers(const Core::JSON::VariantContainer &,GetSubscribersResult & out)", "description": "Returns a list of current subscribers.", "scope": "Plugin::AppNotifications", "scopeKind": "class"}, {"name": "string Information() const", "description": "Returns basic plugin metadata.", "scope": "Plugin::AppNotifications", "scopeKind": "class"}, {"name": "void EmitNotification(const Notification & n)", "description": "Emits a notification event.", "scope": "Plugin::AppNotifications", "scopeKind": "class"}, {"name": "void EmitAck(const string & id,const string & by)", "description": "Emits an acknowledgment event.", "scope": "Plugin::AppNotifications", "scopeKind": "class"}, {"name": "void EmitSubscriberUp(const string & id)", "description": "Emits a subscriber connection event.", "scope": "Plugin::AppNotifications", "scopeKind": "class"}, {"name": "void EmitSubscriberDown(const string & id)", "description": "Emits a subscriber disconnection event.", "scope": "Plugin::AppNotifications", "scopeKind": "class"}, {"name": "void EmitCleared(uint32_t removed,const string & appId,const string & type,bool onlyUnacked)", "description": "Emits an event indicating notifications were cleared.", "scope": "Plugin::AppNotifications", "scopeKind": "class"}, {"name": "string NowISO8601()", "description": "Returns the current timestamp in ISO8601 format.", "scope": "Plugin::AppNotifications", "scopeKind": "class"}, {"name": "bool ShouldPersist() const", "description": "Determines if data should be persisted based on config.", "scope": "Plugin::AppNotifications", "scopeKind": "class"}, {"name": "string ResolvePath(const string & pathTemplate) const", "description": "Resolves placeholders in file paths using environment variables.", "scope": "Plugin::AppNotifications", "scopeKind": "class"}, {"name": "void TrySave()", "description": "Attempts to save current store data to file.", "scope": "Plugin::AppNotifications", "scopeKind": "class"}, {"name": "AppNotifications()", "scope": "Plugin::AppNotifications", "scopeKind": "class", "description": "unavailable"}, {"name": "size_t ApproxSizeBytes(const PublishParams & in)", "scope": "Plugin", "scopeKind": "namespace", "description": "unavailable"}, {"name": "void RegisterAll()", "scope": "Plugin::AppNotifications", "scopeKind": "class", "description": "unavailable"}, {"name": "void UnregisterAll()", "scope": "Plugin::AppNotifications", "scopeKind": "class", "description": "unavailable"}, {"name": "Classification __anon722bf2420102(const string& token, const string& method, const string&)", "scope": "Plugin::AppNotifications::AppNotifications", "scopeKind": "function", "description": "unavailable"}, {"name": "~AppNotifications()", "scope": "Plugin::AppNotifications", "scopeKind": "class", "description": "unavailable"}], "calls": ["Register<...>", "Unregister", "Activate", "Deactivate", "Notify", "_store->Add", "_store->LoadFromFile", "_store->SaveToFile", "_store->List", "_store->ClearById", "_store->ClearByFilter", "_store->Ack"], "search-terms": ["NotificationStore", "JSONRPC endpoints", "publish/subscribe", "persistence", "storage path", "eviction", "acknowledgment", "subscriber management", "event emission", "token validation"], "state": 2, "file_id": 20, "knowledge_revision": 41, "git_revision": "", "ctags": [{"_type": "tag", "name": "Ack", "path": "/home/kavia/workspace/code-generation/app-gateway1/AppNotifications/Source/ThunderAppNotifications/AppNotifications.cpp", "pattern": "/^    uint32_t AppNotifications::Ack(const AckParams& in, AckResult& out) {$/", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "(const AckParams & in,AckResult & out)", "scope": "Plugin::AppNotifications", "scopeKind": "class"}, {"_type": "tag", "name": "AppNotifications", "path": "/home/kavia/workspace/code-generation/app-gateway1/AppNotifications/Source/ThunderAppNotifications/AppNotifications.cpp", "pattern": "/^    AppNotifications::AppNotifications()$/", "language": "C++", "kind": "function", "signature": "()", "scope": "Plugin::AppNotifications", "scopeKind": "class"}, {"_type": "tag", "name": "ApproxSizeBytes", "path": "/home/kavia/workspace/code-generation/app-gateway1/AppNotifications/Source/ThunderAppNotifications/AppNotifications.cpp", "pattern": "/^    static size_t ApproxSizeBytes(const PublishParams& in) {$/", "file": true, "language": "C++", "typeref": "typename:size_t", "kind": "function", "signature": "(const PublishParams & in)", "scope": "Plugin", "scopeKind": "namespace"}, {"_type": "tag", "name": "Classification", "path": "/home/kavia/workspace/code-generation/app-gateway1/AppNotifications/Source/ThunderAppNotifications/AppNotifications.cpp", "pattern": "/^        using Classification = PluginHost::JSONRPC::classification;$/", "file": true, "language": "C++", "typeref": "typename:PluginHost::JSONRPC::classification", "kind": "typedef", "scope": "Plugin::AppNotifications::AppNotifications", "scopeKind": "function"}, {"_type": "tag", "name": "Clear", "path": "/home/kavia/workspace/code-generation/app-gateway1/AppNotifications/Source/ThunderAppNotifications/AppNotifications.cpp", "pattern": "/^    uint32_t AppNotifications::Clear(const ClearParams& in, ClearResult& out) {$/", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "(const ClearParams & in,ClearResult & out)", "scope": "Plugin::AppNotifications", "scopeKind": "class"}, {"_type": "tag", "name": "Deinitialize", "path": "/home/kavia/workspace/code-generation/app-gateway1/AppNotifications/Source/ThunderAppNotifications/AppNotifications.cpp", "pattern": "/^    void AppNotifications::Deinitialize(PluginHost::IShell* service) {$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(PluginHost::IShell * service)", "scope": "Plugin::AppNotifications", "scopeKind": "class"}, {"_type": "tag", "name": "EmitAck", "path": "/home/kavia/workspace/code-generation/app-gateway1/AppNotifications/Source/ThunderAppNotifications/AppNotifications.cpp", "pattern": "/^    void AppNotifications::EmitAck(const string& id, const string& by) {$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(const string & id,const string & by)", "scope": "Plugin::AppNotifications", "scopeKind": "class"}, {"_type": "tag", "name": "EmitCleared", "path": "/home/kavia/workspace/code-generation/app-gateway1/AppNotifications/Source/ThunderAppNotifications/AppNotifications.cpp", "pattern": "/^    void AppNotifications::EmitCleared(uint32_t removed, const string& appId, const string& type/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(uint32_t removed,const string & appId,const string & type,bool onlyUnacked)", "scope": "Plugin::AppNotifications", "scopeKind": "class"}, {"_type": "tag", "name": "EmitNotification", "path": "/home/kavia/workspace/code-generation/app-gateway1/AppNotifications/Source/ThunderAppNotifications/AppNotifications.cpp", "pattern": "/^    void AppNotifications::EmitNotification(const Notification& n) {$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(const Notification & n)", "scope": "Plugin::AppNotifications", "scopeKind": "class"}, {"_type": "tag", "name": "EmitSubscriberDown", "path": "/home/kavia/workspace/code-generation/app-gateway1/AppNotifications/Source/ThunderAppNotifications/AppNotifications.cpp", "pattern": "/^    void AppNotifications::EmitSubscriberDown(const string& id) {$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(const string & id)", "scope": "Plugin::AppNotifications", "scopeKind": "class"}, {"_type": "tag", "name": "EmitSubscriberUp", "path": "/home/kavia/workspace/code-generation/app-gateway1/AppNotifications/Source/ThunderAppNotifications/AppNotifications.cpp", "pattern": "/^    void AppNotifications::EmitSubscriberUp(const string& id) {$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(const string & id)", "scope": "Plugin::AppNotifications", "scopeKind": "class"}, {"_type": "tag", "name": "GetSubscribers", "path": "/home/kavia/workspace/code-generation/app-gateway1/AppNotifications/Source/ThunderAppNotifications/AppNotifications.cpp", "pattern": "/^    uint32_t AppNotifications::GetSubscribers(const Core::JSON::VariantContainer&, GetSubscriber/", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "(const Core::JSON::VariantContainer &,GetSubscribersResult & out)", "scope": "Plugin::AppNotifications", "scopeKind": "class"}, {"_type": "tag", "name": "Information", "path": "/home/kavia/workspace/code-generation/app-gateway1/AppNotifications/Source/ThunderAppNotifications/AppNotifications.cpp", "pattern": "/^    string AppNotifications::Information() const {$/", "language": "C++", "typeref": "typename:string", "kind": "function", "signature": "() const", "scope": "Plugin::AppNotifications", "scopeKind": "class"}, {"_type": "tag", "name": "Initialize", "path": "/home/kavia/workspace/code-generation/app-gateway1/AppNotifications/Source/ThunderAppNotifications/AppNotifications.cpp", "pattern": "/^    const string AppNotifications::Initialize(PluginHost::IShell* service) {$/", "language": "C++", "typeref": "typename:const string", "kind": "function", "signature": "(PluginHost::IShell * service)", "scope": "Plugin::AppNotifications", "scopeKind": "class"}, {"_type": "tag", "name": "List", "path": "/home/kavia/workspace/code-generation/app-gateway1/AppNotifications/Source/ThunderAppNotifications/AppNotifications.cpp", "pattern": "/^    uint32_t AppNotifications::List(const ListParams& in, NotificationsArray& out) {$/", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "(const ListParams & in,NotificationsArray & out)", "scope": "Plugin::AppNotifications", "scopeKind": "class"}, {"_type": "tag", "name": "NowISO8601", "path": "/home/kavia/workspace/code-generation/app-gateway1/AppNotifications/Source/ThunderAppNotifications/AppNotifications.cpp", "pattern": "/^    string AppNotifications::NowISO8601() {$/", "language": "C++", "typeref": "typename:string", "kind": "function", "signature": "()", "scope": "Plugin::AppNotifications", "scopeKind": "class"}, {"_type": "tag", "name": "Ping", "path": "/home/kavia/workspace/code-generation/app-gateway1/AppNotifications/Source/ThunderAppNotifications/AppNotifications.cpp", "pattern": "/^    uint32_t AppNotifications::Ping(const Core::JSON::VariantContainer&, PingResult& out) {$/", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "(const Core::JSON::VariantContainer &,PingResult & out)", "scope": "Plugin::AppNotifications", "scopeKind": "class"}, {"_type": "tag", "name": "Plugin", "path": "/home/kavia/workspace/code-generation/app-gateway1/AppNotifications/Source/ThunderAppNotifications/AppNotifications.cpp", "pattern": "/^namespace Plugin {$/", "file": true, "language": "C++", "kind": "namespace"}, {"_type": "tag", "name": "Publish", "path": "/home/kavia/workspace/code-generation/app-gateway1/AppNotifications/Source/ThunderAppNotifications/AppNotifications.cpp", "pattern": "/^    uint32_t AppNotifications::Publish(const PublishParams& in, PublishResult& out) {$/", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "(const PublishParams & in,PublishResult & out)", "scope": "Plugin::AppNotifications", "scopeKind": "class"}, {"_type": "tag", "name": "RegisterAll", "path": "/home/kavia/workspace/code-generation/app-gateway1/AppNotifications/Source/ThunderAppNotifications/AppNotifications.cpp", "pattern": "/^    void AppNotifications::RegisterAll() {$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "()", "scope": "Plugin::AppNotifications", "scopeKind": "class"}, {"_type": "tag", "name": "ResolvePath", "path": "/home/kavia/workspace/code-generation/app-gateway1/AppNotifications/Source/ThunderAppNotifications/AppNotifications.cpp", "pattern": "/^    string AppNotifications::ResolvePath(const string& pathTemplate) const {$/", "language": "C++", "typeref": "typename:string", "kind": "function", "signature": "(const string & pathTemplate) const", "scope": "Plugin::AppNotifications", "scopeKind": "class"}, {"_type": "tag", "name": "ShouldPersist", "path": "/home/kavia/workspace/code-generation/app-gateway1/AppNotifications/Source/ThunderAppNotifications/AppNotifications.cpp", "pattern": "/^    bool AppNotifications::ShouldPersist() const {$/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "() const", "scope": "Plugin::AppNotifications", "scopeKind": "class"}, {"_type": "tag", "name": "Subscribe", "path": "/home/kavia/workspace/code-generation/app-gateway1/AppNotifications/Source/ThunderAppNotifications/AppNotifications.cpp", "pattern": "/^    uint32_t AppNotifications::Subscribe(const SubscribeParams& in, SubscribeResult& out) {$/", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "(const SubscribeParams & in,SubscribeResult & out)", "scope": "Plugin::AppNotifications", "scopeKind": "class"}, {"_type": "tag", "name": "TrySave", "path": "/home/kavia/workspace/code-generation/app-gateway1/AppNotifications/Source/ThunderAppNotifications/AppNotifications.cpp", "pattern": "/^    void AppNotifications::TrySave() {$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "()", "scope": "Plugin::AppNotifications", "scopeKind": "class"}, {"_type": "tag", "name": "UnregisterAll", "path": "/home/kavia/workspace/code-generation/app-gateway1/AppNotifications/Source/ThunderAppNotifications/AppNotifications.cpp", "pattern": "/^    void AppNotifications::UnregisterAll() {$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "()", "scope": "Plugin::AppNotifications", "scopeKind": "class"}, {"_type": "tag", "name": "Unsubscribe", "path": "/home/kavia/workspace/code-generation/app-gateway1/AppNotifications/Source/ThunderAppNotifications/AppNotifications.cpp", "pattern": "/^    uint32_t AppNotifications::Unsubscribe(const UnsubscribeParams& in, UnsubscribeResult& out) /", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "(const UnsubscribeParams & in,UnsubscribeResult & out)", "scope": "Plugin::AppNotifications", "scopeKind": "class"}, {"_type": "tag", "name": "__anon722bf2420102", "path": "/home/kavia/workspace/code-generation/app-gateway1/AppNotifications/Source/ThunderAppNotifications/AppNotifications.cpp", "pattern": "/^        PluginHost::JSONRPC::TokenCheckFunction validate = [this](const string& token, const str/", "file": true, "language": "C++", "typeref": "typename:Classification", "kind": "function", "signature": "(const string& token, const string& method, const string&) ", "scope": "Plugin::AppNotifications::AppNotifications", "scopeKind": "function"}, {"_type": "tag", "name": "~AppNotifications", "path": "/home/kavia/workspace/code-generation/app-gateway1/AppNotifications/Source/ThunderAppNotifications/AppNotifications.cpp", "pattern": "/^    AppNotifications::~AppNotifications() {$/", "language": "C++", "kind": "function", "signature": "()", "scope": "Plugin::AppNotifications", "scopeKind": "class"}], "hash": "1a147b104ca9b3e36b7e140c72108f73", "format-version": 4, "code-base-name": "app-gateway", "filename": "AppNotifications/Source/ThunderAppNotifications/AppNotifications.cpp", "revision_history": [{"41": ""}]}